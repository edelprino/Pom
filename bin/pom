#!/usr/bin/env node
var timer   = require('daemonize2');
var command = require('commander');
var version = require('../package.json').version;

var conf = {
    main: '../lib/pom.js',
    name: 'pom',
    pidfile: '/tmp/pom.pid',
    silent: true
};

command.version(version);
command.option('-b, --break', 'break')

command
    .command('start')
    .description('start pomodoro timer')
    .action(function(){
        conf.argv = command.break ? 'break' : 'pomodoro';
        timer.setup(conf).start();
        console.log('pomodoro start');
    });

command
    .command('stop')
    .description('stop pomodoro timer')
    .action(function(){
        timer.setup(conf).stop();
        console.log('pomodoro stop');
    });

command.parse(process.argv);

if (!command.args.length) command.help();

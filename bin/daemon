#!/usr/bin/env node
var exec = require('child_process').exec
var pom = require('../lib/pom');
var Launcher = require('../lib/launcher').Launcher;
var Setup = require('../lib/setup').Setup;

var CONFIGURATION_FILE = process.env.HOME + '/.pom.yml';
var action = process.argv[2] || 'default';
var setup = new Setup(CONFIGURATION_FILE).get(action);

var duration = new pom.Minutes(setup.duration);
var start = new Launcher(setup.start, exec);
var end = new Launcher(setup.end, exec);

var pomodoro = new pom.Pomodoro(duration, start, end);
pomodoro.run();
